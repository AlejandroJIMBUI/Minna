---
export const prerender = false;
import Layout from "../layouts/Layout.astro";
import CreatePostForm from "../components/posts/CreatePostForm.astro";
import "../styles/create-post.css";

const session = Astro.locals.session;
const user = Astro.locals.user;

if (!session || !user) {
  return Astro.redirect("/login");
}

const error = Astro.url.searchParams.get("error");
const message = Astro.url.searchParams.get("message");
---

<Layout title="Create Post" showHeader={false}>
  <div class="create-post-page">
    <main class="page-main">
      <div class="create-post-container">
        <div class="create-post-header">
          <h1>Create New Post</h1>
          <p>Share your thoughts with the community</p>
        </div>
        <CreatePostForm error={error} message={message} />
      </div>
    </main>
  </div>
</Layout>
